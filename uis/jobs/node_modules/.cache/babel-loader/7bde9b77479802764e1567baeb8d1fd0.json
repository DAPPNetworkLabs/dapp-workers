{"ast":null,"code":"const ethereum = window.ethereum;\n\nconst login = async thisObject => {\n  const accounts = await ethereum.request({\n    method: 'eth_requestAccounts'\n  });\n  thisObject.setState({\n    account: accounts[0]\n  });\n};\n\nconst logout = async thisObject => {\n  thisObject.setState({\n    account: null\n  });\n};\n\nconst handleConnect = thisObject => {\n  ethereum.on('connect', connectInfo => {\n    thisObject.setState({\n      connectInfo\n    });\n  });\n};\n\nconst handleDisconnect = thisObject => {\n  ethereum.on('disconnect', error => {\n    thisObject.setState({\n      disconnectInfo: error\n    });\n  });\n};\n\nconst handleAccountChange = thisObject => {\n  ethereum.on('accountsChanged', account => {\n    thisObject.setState({\n      account\n    });\n  });\n};\n\nconst handleChainChange = thisObject => {\n  ethereum.on('chainChanged', chainId => {\n    thisObject.setState({\n      chainId\n    });\n  });\n};\n\nconst runHandlers = thisObject => {\n  handleConnect(thisObject);\n  handleDisconnect(thisObject);\n  handleAccountChange(thisObject);\n  handleChainChange(thisObject);\n};\n\nconst rmHandlers = () => {\n  ethereum.removeListener('connect', handleConnect);\n  ethereum.removeListener('disconnect', handleDisconnect);\n  ethereum.removeListener('accountsChanged', handleAccountChange);\n  ethereum.removeListener('chainChanged', handleChainChange);\n};\n\nexport default {\n  login,\n  logout,\n  runHandlers,\n  rmHandlers\n};","map":{"version":3,"sources":["/Users/natanaelprudhomme/Workspaces/dapp-workers/uis/jobs/src/lib/metamask/index.js"],"names":["ethereum","window","login","thisObject","accounts","request","method","setState","account","logout","handleConnect","on","connectInfo","handleDisconnect","error","disconnectInfo","handleAccountChange","handleChainChange","chainId","runHandlers","rmHandlers","removeListener"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,MAAM,CAACD,QAAxB;;AAEA,MAAME,KAAK,GAAG,MAAOC,UAAP,IAAsB;AAChC,QAAMC,QAAQ,GAAG,MAAMJ,QAAQ,CAACK,OAAT,CAAiB;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAAjB,CAAvB;AACAH,EAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEC,IAAAA,OAAO,EAAEJ,QAAQ,CAAC,CAAD;AAAnB,GAApB;AACH,CAHD;;AAKA,MAAMK,MAAM,GAAG,MAAON,UAAP,IAAsB;AACjCA,EAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEC,IAAAA,OAAO,EAAE;AAAX,GAApB;AACH,CAFD;;AAIA,MAAME,aAAa,GAAIP,UAAD,IAAgB;AAClCH,EAAAA,QAAQ,CAACW,EAAT,CAAY,SAAZ,EAAwBC,WAAD,IAAiB;AACpCT,IAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEK,MAAAA;AAAF,KAApB;AACH,GAFD;AAGH,CAJD;;AAMA,MAAMC,gBAAgB,GAAIV,UAAD,IAAgB;AACrCH,EAAAA,QAAQ,CAACW,EAAT,CAAY,YAAZ,EAA2BG,KAAD,IAAW;AACjCX,IAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEQ,MAAAA,cAAc,EAACD;AAAjB,KAApB;AACH,GAFD;AAGH,CAJD;;AAMA,MAAME,mBAAmB,GAAIb,UAAD,IAAgB;AACxCH,EAAAA,QAAQ,CAACW,EAAT,CAAY,iBAAZ,EAAgCH,OAAD,IAAa;AACxCL,IAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEC,MAAAA;AAAF,KAApB;AACH,GAFD;AAGH,CAJD;;AAMA,MAAMS,iBAAiB,GAAId,UAAD,IAAgB;AACtCH,EAAAA,QAAQ,CAACW,EAAT,CAAY,cAAZ,EAA6BO,OAAD,IAAa;AACrCf,IAAAA,UAAU,CAACI,QAAX,CAAoB;AAAEW,MAAAA;AAAF,KAApB;AACH,GAFD;AAGH,CAJD;;AAMA,MAAMC,WAAW,GAAIhB,UAAD,IAAgB;AAChCO,EAAAA,aAAa,CAACP,UAAD,CAAb;AACAU,EAAAA,gBAAgB,CAACV,UAAD,CAAhB;AACAa,EAAAA,mBAAmB,CAACb,UAAD,CAAnB;AACAc,EAAAA,iBAAiB,CAACd,UAAD,CAAjB;AACH,CALD;;AAOA,MAAMiB,UAAU,GAAG,MAAM;AACrBpB,EAAAA,QAAQ,CAACqB,cAAT,CAAwB,SAAxB,EAAmCX,aAAnC;AACAV,EAAAA,QAAQ,CAACqB,cAAT,CAAwB,YAAxB,EAAsCR,gBAAtC;AACAb,EAAAA,QAAQ,CAACqB,cAAT,CAAwB,iBAAxB,EAA2CL,mBAA3C;AACAhB,EAAAA,QAAQ,CAACqB,cAAT,CAAwB,cAAxB,EAAwCJ,iBAAxC;AACH,CALD;;AAOA,eAAe;AACXf,EAAAA,KADW;AAEXO,EAAAA,MAFW;AAGXU,EAAAA,WAHW;AAIXC,EAAAA;AAJW,CAAf","sourcesContent":["const ethereum = window.ethereum;\n\nconst login = async (thisObject) => {\n    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });\n    thisObject.setState({ account: accounts[0] });\n}\n\nconst logout = async (thisObject) => {\n    thisObject.setState({ account: null });\n}\n\nconst handleConnect = (thisObject) => {\n    ethereum.on('connect', (connectInfo) => {\n        thisObject.setState({ connectInfo });\n    });\n}\n\nconst handleDisconnect = (thisObject) => {\n    ethereum.on('disconnect', (error) => {\n        thisObject.setState({ disconnectInfo:error });\n    });\n}\n\nconst handleAccountChange = (thisObject) => {\n    ethereum.on('accountsChanged', (account) => {\n        thisObject.setState({ account });\n    });\n}\n\nconst handleChainChange = (thisObject) => {\n    ethereum.on('chainChanged', (chainId) => {\n        thisObject.setState({ chainId });\n    });\n}\n\nconst runHandlers = (thisObject) => {\n    handleConnect(thisObject);\n    handleDisconnect(thisObject);\n    handleAccountChange(thisObject);\n    handleChainChange(thisObject);\n}\n\nconst rmHandlers = () => {\n    ethereum.removeListener('connect', handleConnect);\n    ethereum.removeListener('disconnect', handleDisconnect);\n    ethereum.removeListener('accountsChanged', handleAccountChange);\n    ethereum.removeListener('chainChanged', handleChainChange);\n}\n\nexport default { \n    login,\n    logout,\n    runHandlers,\n    rmHandlers\n}"]},"metadata":{},"sourceType":"module"}