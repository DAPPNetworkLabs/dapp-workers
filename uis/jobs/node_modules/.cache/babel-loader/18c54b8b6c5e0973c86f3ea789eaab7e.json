{"ast":null,"code":"var _jsxFileName = \"/Users/natanaelprudhomme/Workspaces/dapp-workers/uis/jobs/src/containers/Home/Home.jsx\";\nimport React, { Component } from 'react';\nimport classes from './Home.module.scss';\nimport Header from '../../components/Header/Header';\nimport Jobs from '../../components/Home/Jobs/Jobs';\nimport Services from '../../components/Home/Services/Services';\nimport PostJobOrService from '../../components/Home/PostJobOrService/PostJobOrService';\nimport RunJob from '../../components/Home/RunJob/RunJob';\nimport RunService from '../../components/Home/RunService/RunService';\nimport SetDockerImage from '../../components/Home/SetDockerImage/SetDockerImage';\nimport Footer from '../../components/Footer/Footer';\nimport lib from '../../lib/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ethereum = window.ethereum;\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: null,\n      jobs: [],\n      services: [],\n      run: {\n        consumer: '0xe26f809e5826fd8e1c0da1e6d9f308da9d86de4f',\n        imageName: 'rust-compiler',\n        inputFS: 'QmUm1JD5os8p6zu6gQBPr7Rov2VD6QzMeRBH5j4ojFBzi6',\n        args: []\n      },\n      runJob: {\n        jobId: 5,\n        outputFS: '',\n        dapps: 804000\n      },\n      runService: {\n        jobId: 5,\n        port: 8080,\n        dapps: 804000\n      },\n      setDockerImage: {\n        imageName: '',\n        imageAddress: '',\n        imageHash: '',\n        imageType: ''\n      }\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    const accounts = ethereum.request({\n      method: 'eth_requestAccounts'\n    });\n    lib.web3.fetchJobs(this);\n    lib.web3.fetchServices(this);\n    this.setState({\n      account: accounts[0]\n    });\n  }\n\n  handleChange(event, func) {\n    console.log(func);\n    const {\n      name,\n      value\n    } = event.target;\n    console.log({\n      name,\n      value\n    });\n    const state = this.state[func];\n    this.setState({\n      func: { ...func,\n        [name]: value,\n        error: ''\n      }\n    });\n    console.log({\n      func: { ...this.state[func],\n        [name]: value,\n        error: ''\n      }\n    });\n    console.log(this.state[func]);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        login: () => lib.metamask.login(this),\n        logout: () => lib.metamask.logout(this),\n        account: this.state.account\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Jobs, {\n        jobs: this.state.jobs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Services, {\n        services: this.state.services\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PostJobOrService, {\n        postJobOrService: () => lib.web3.postJobOrService(this.state.run),\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RunJob, {\n        runJob: () => lib.web3.runJob(this.state.runJob),\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(RunService, {\n        runService: () => lib.web3.runService(this.state.runService),\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SetDockerImage, {\n        setDockerImage: () => lib.web3.setDockerImage(this.state.setDockerImage),\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/natanaelprudhomme/Workspaces/dapp-workers/uis/jobs/src/containers/Home/Home.jsx"],"names":["React","Component","classes","Header","Jobs","Services","PostJobOrService","RunJob","RunService","SetDockerImage","Footer","lib","ethereum","window","Home","constructor","props","state","account","jobs","services","run","consumer","imageName","inputFS","args","runJob","jobId","outputFS","dapps","runService","port","setDockerImage","imageAddress","imageHash","imageType","handleChange","bind","componentDidMount","accounts","request","method","web3","fetchJobs","fetchServices","setState","event","func","console","log","name","value","target","error","render","metamask","login","logout","postJobOrService"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport classes from './Home.module.scss';\nimport Header from '../../components/Header/Header';\nimport Jobs from '../../components/Home/Jobs/Jobs';\nimport Services from '../../components/Home/Services/Services';\nimport PostJobOrService from '../../components/Home/PostJobOrService/PostJobOrService';\nimport RunJob from '../../components/Home/RunJob/RunJob';\nimport RunService from '../../components/Home/RunService/RunService';\nimport SetDockerImage from '../../components/Home/SetDockerImage/SetDockerImage';\nimport Footer from '../../components/Footer/Footer';\nimport lib from '../../lib/index';\n\nconst ethereum = window.ethereum;\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            account: null,\n            jobs: [],\n            services: [],\n            run: {\n                consumer: '0xe26f809e5826fd8e1c0da1e6d9f308da9d86de4f',\n                imageName: 'rust-compiler',\n                inputFS: 'QmUm1JD5os8p6zu6gQBPr7Rov2VD6QzMeRBH5j4ojFBzi6',\n                args: []\n            },\n            runJob: {\n                jobId: 5,\n                outputFS: '',\n                dapps: 804000\n            },\n            runService: {\n                jobId: 5,\n                port: 8080,\n                dapps: 804000\n            },\n            setDockerImage: {\n                imageName: '',\n                imageAddress: '',\n                imageHash: '',\n                imageType: ''\n            }\n        }\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidMount() {\n        const accounts = ethereum.request({ method: 'eth_requestAccounts' });\n        lib.web3.fetchJobs(this);\n        lib.web3.fetchServices(this);\n        this.setState({ account: accounts[0] });\n    }\n\n    handleChange(event, func) {\n        console.log(func)\n        const { name, value } = event.target;\n        console.log({ name, value })\n        const state = this.state[func];\n        this.setState({\n            func: {\n                ...func,\n                [name]: value,\n                error: '',\n            },\n        });\n        console.log({\n            func: {\n                ...this.state[func],\n                [name]: value,\n                error: '',\n            },\n        })\n        console.log(this.state[func])\n    }\n  \n    render() {\n        return (\n            <div>\n                <Header\n                    login={()=>lib.metamask.login(this)}\n                    logout={()=>lib.metamask.logout(this)}\n                    account={this.state.account}\n                />\n                <Jobs\n                    jobs={this.state.jobs}\n                />\n                <Services\n                    services={this.state.services}\n                />\n                <PostJobOrService\n                    postJobOrService={()=>lib.web3.postJobOrService(this.state.run)}\n                    onChange={this.handleChange}\n                />\n                <RunJob\n                    runJob={()=>lib.web3.runJob(this.state.runJob)}\n                    onChange={this.handleChange}\n                />\n                <RunService\n                    runService={()=>lib.web3.runService(this.state.runService)}\n                    onChange={this.handleChange}\n                />\n                <SetDockerImage\n                    setDockerImage={()=>lib.web3.setDockerImage(this.state.setDockerImage)}\n                    onChange={this.handleChange}\n                />\n                <Footer/>\n            </div>\n        );\n    }\n  }\n  \n  export default Home;\n  "]},"metadata":{},"sourceType":"module"}